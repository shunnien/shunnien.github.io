title: 'vdi to vhd(VirtualBox) & vhd to vhdx'
categories: [程式技術筆記]
tags: [Hyper-V]
description: 虛擬機器硬碟檔案轉換
date: 2016-02-25 15:49:56
---

## 前言
VirtualBox 建立的虛擬機器想移動到 Hyper-v 使用呀。

## VDI to VHD
VirtualBox 安裝後，會有 VBoxManage 轉換工具，要執行這工具，必須要在安裝程式路徑下執行命令提示字元；可由執行程式，開啟檔案位置。
![open path](https://lh3.googleusercontent.com/ttJR4tAoKwxw0ccPqQFP8bfaMxyud6OnKHdegFLxko2QklCDgO5BVKq1fnJ3rakV6OCr5hwO1qANnM_DOltwzC_4_1baH5UfCQYzQZRwA54_Jad8xIYl60vaQh8XwqFQnRBxbXLw4XSv6dIeltFC01FfGBdiFNqKIXOI3X5anMvMB7BYLa1U5Bp-2y74Xue6W8d8rB8oLddJUJesERYveFaF1HDvo21nt_6K_isLGzpl-v1B4lfIGWw0BMPvqSJQ1-L7q9hP0cKhwEXcbKD8OrReB7HLxMplTNh6RFv0Jzp9KEXebb_PP4Y4TzhLOzjrRkfdhDeChTjoH071RvpP_nZbIRLCn9SAmqWjRxN6Zs-5CgYMCCT2wqxFbZkQbDaAJy5NJVlAuycLvYxaZxhFsKzaE8QaP7UmgIP9loFTrQnawzLaDn9utJ8NXn5vdLNoG030tytoJSNHs33KO6In-ZK12lCbW4rV18YTvGJz8ywCeu-XFtR8q7O-GWQF54ZiHKVxiyVV_ydi0ktH4pfUmdRAnx1JFTX2mtQWAweT8j2dLp-rsL6XaO2qgIAe1gxg9vhd2VwmaMf3oHRgWsrG0XLR4y7yi6UATuS4ITYUgMxUzGYe8LfrCMsStT_zPpdPqlvgT4TFw1Ali6YK-9UpINMmm8u78RSsRWPI6b5hOw=w285-h200-no)
![open command line](https://lh3.googleusercontent.com/2hwWpvyHlzURydB4ClimwurhI6Sa8UEjnYYQmyNfmA9YjFunQTFf2wEWOwDf_ROqaCV6FarYrVsqqjQ-4GGFhH2p_FeV-j7GshJzOONA9d0CZdR7w0uIzwFXT2HN9tWPBrEm9zUO5fb4zypgac0A04B6XyYV6FFmeUmPS8dhuUuAmSfN9f9aFqgXasT3uYKKgow7he1KmMP_Xq3pRgMoramyf2k2kX_Prs9vZg7c5wFwm99mlENnIH6eBgPgUp7xi5RXLnodQmGIosFa4vKCRnIKAMmjFSFeT40rSl5n34i_k0iAtIa-36yAw_T2NCpc666VYGERF7VNzbmorvFFgbDh40I2qyaBsEMF5BaHYM9LTclowyUjB7k8Spoyv_a_PHf7lONOcgg1_6RmwvdFNszYijWIt8qXvejboLGRZ0GCAOEM0cTchfDoc_ObKlIKxWWgTJsqCA2puCWroh2tw0GfMO9q4ztN6XqFATrQ2tNBHGzSZZ59cONjIMst3Ajci2fW2hNGC3QaPfzIGHoTqNhmLxpLhFeAbo68QhYfFDXlmfwBUne_scrFnhh3XH7aPFc7N997Ti7nsoI-8JvnMtFVrmBsslmzwVBl5R5_OO_5ezV_oIvH5cB6HBEIheJSQoZJjoDfDIl9PES3boEQCF0p508Rlz1itv5ayQQUcw=w317-h72-no)
![command line](https://lh3.googleusercontent.com/VE5nhs5SFbM8Jly2OHphgH4iKoO4sz1kNfZZfabokI2DbjLtPcmp--teVlU5bvhbFjUQeFBdODPzVhsb8UFjtdNpeGj2t_wZB28Gz34Y52mBv_vWH9cMyfGX_Qt3Jc3yXeI_vG-lGQ6ZhuELu-6RVWD5fCZRK62UGWYZdut9UiFRy_XHiTmeeG_yG4892oZLMvNagseCEFClD_c22mhh3FZTKRAB2uoysU7qJd2i2EtHwNULBSUWkcZLmclbwkf_at-9WPUcB5lo2tzEWLMa_qM-ItK8qU9rw0AiWsOCas3leswa_5ziQUIcJPDG2KAUpPVT0lWtejqCNFF3JwdZcCUO9Y8scWV3dpCo4gSG-DscN5PaLyYXbTPisPX6S64tx2XMmuwzxwGyGIs_1AoqjdxBGTdulCuFGZkVPZxHb7XXxhrSzWP0mMl0HHIXwhrw9HSSCM-x2107-h8qZGlOhqKeNh1YsvnQDQ7yrNKkfI4HmWOLnhW0UTED4MPwFnrCQJVnGlZCoQkUH2AC5zn70NXDYvcvjzWuShI2GCTM7pSPXIceQYcES7scDpMdk0Z0gA4IixQbInrJkKAjKJEf2eHVcL3HU6zxABH-0ydDRT8T0Mo5JM8SewzSug99eVU_1Syu0hcRaoDYJGB2HCcGInGbIXX0Zs9o7FIzcU1tAA=w627-h98-no)

接著請在 VirtualBox 安裝資料夾下的路徑執行以下指令，檔案格式除了 VHD，也可以轉換到 VMDK(VMWare 的格式)

``` bash
vboxmanage clonehd 來源檔案.vdi D:\目的檔名.vhd --format VHD
```

條列一下轉換格式，想更了解相關資料的可以參考[官方文件][1]
- VDI
- VMDK
- VHD
- RAW
- other

## VHD to VHDX
這部分就要透過 Hyper-V 來進行轉換了，只是 Hyper-V 提供的轉換只有 VHD 跟 VHDX 的互相轉換而已
![編輯磁碟](https://lh3.googleusercontent.com/FXpkSXS_EDnAtaW-S5jaFvJAuTAEtHksXHDStHVvuJ9ZmWHAm7OrMEb9rKGbpcBMBkGWxQY_1MQL2bpwZXhtkbHiv7I7U5UkQNqqcs1lle6nAzPO2Qr_roQwNGVd7lB1NFW1PpW2lxPAeGRN1lAhmc_F-Gc0rM3nGr06PEcM5BVDgbuGRJ62FGHGAVx7GNEFNrweApd1_4daPTL0BH2P1InDI1obZnxB52ZO60Bvb0jQ_ceJEYjozKZtVOeObZSBmY9Dr7UE0DZMVKx9oqgNDZmRpz28NmONndPHgWPqVC-O2tHaXS9Pcn6cy4ZmLsR6RRH8RrDE_mN-xA4E3Z8oDAbAK3POvfEHhZ_UHSt_b1izCj51iGGwTIy2Jt0nvFExKjwKehHSEADLhacUg-XBcrxLjb43Py2fFEj7qJ0YoB7JJlS8yfvuWrpoknhbw3exexjNOBGjpA4Es0ewlgPvN5dxHaHNM76i0Cc7okGSnyYgtr3GKzpfE7HzGhFKJSgxds57VCj2WAJlvxNg5iTrSqrRCPXc0Ryhzx7ZcG3CnT4drC8JENkYYMywqLa-hMTk1XOW6pzes2ap484ltlA21p1mU-KxNeIXfnotWgmn1Tp90lUfm8tUfqVBdhp9sSP8c5DZfRGEE64fN-L9kqy_LfXfvEYIkMsx450M_r4Zkg=w262-h353-no)
![轉換](https://lh3.googleusercontent.com/WCnoVxPbP9Mgf2Bh0cE5ZnY-OHAs95jO_lYnO9mvDF94sZnSbAPSzTaBasUw_WkinzaEBErR5Q4sI-tlgrLGVnuGxmeRCurHSjVLIyK5DQurFasFBkJQh1Zyy2KFasLD1kFBqV3LdtgS_fJgN8FkaNCB-dDfwwQliKihmwfGBDMgXqtUsGJpobXBWGiSyQX3Ls0OBkm00PnAxKpZlt3aQYjK0QRcF9DDYEcjwzX2K4bL_LiEb7UcnSz4iAxSmGUwiU3StUKSyurd_wev65CyKu-_JRfWvebM7hcvAdlUyM2ReOgvvYJISf0H_n7KZgv1djQ7aRGR94K34WbmfwLPQh7I-MWKzpffmDHE-jUUfkLPjysFOplnADW48pivddZJBxJPaKDxM-STz5138SAm-JIcK03wmBLo8dVT6Ys1-3lAdmDg8umcMzZ1Bzyath3fQvv01V8Tc0ALdKTdOLOZujC4osXUPryNgbgj7HUXKqFZF5eLvztDfewiQk68eDlDmbIFAIhoJTnPHhLHXQEDk1rnlxyIx7cX2XUZN1MRKS9mcB7QrsrokWDmSmX07PWdYS5dEEoRVRBH1mbdU-930S_lvc4_-jePgfEdDHAMjiBB7cuWkrV1rQbsfUzciRXi5Gai0WVSPH8AyUAc8xMWabadXA4AwIfbGwzCeEj0yA=w754-h314-no)
![轉換格式](https://lh3.googleusercontent.com/bPSpzaNecdijHY9KwyhT_9rbxZVDgnvKZVGOzC4E86gUZixheevmxGLj8hqbgUSNvpyukJ444dIttZSlzqIw8DBROjyod0gk0V0AQ6P1lknhHI5v6E17CzZ-crX0XjimM8yZkw7bAIAaVo9Kus21darcOj1rZgXfDET11F8QeruL7WebXYwnrfjnlkUb86qUwEPHMClYgYQZVxxnVUYaXQ_LivgWoCRgToWCRrhziZOVdWasCffRvOqkUb6D9clCkf-0NCznBwFLCGQnKO_vsI9IRH2QVMuzYxi1OGCKT_4ysXfcUTW_1LR2l3rCgOOxA5uPPOuBpkOZQ-5M8EJIpMWGfMRt5bfa-AemmbHsF9buacsekKh74fvJ2sj_EE4ORKlf1NVqtDdrIzUZa0SBMZmcRCLyKrET2ZyQpB1yk2N54zHGEfI_3pk7NSraBeEPirgkGdbz082X52zhH6GNUBstQ4gxAiCzqZuGhCK8HTWnAKTIm_tMasMGHRAoHfxRaCle0uE9WDybemI6S5rB5p3bPK4dG21Vg7vICA2ZXisEC01dAaLD4RZQtLrGG0z19jFf5NKmCDpy1eS7rnDahMttus-uRqx3Ug2STdDbLKhrYys7_UVepfibvyoVIDXWNSsHJUd-AUdeoEzodmE8LJY9_AGa3ii-I49NyDjntA=w586-h184-no)

## 參考資料
- [VirtualBox][1]
- 皓皓-IT生涯-[VHD轉換VHDX格式][2]

[1]: https://www.virtualbox.org/manual/ch08.html
[2]: https://dotblogs.com.tw/haohao200138/2012/10/23/78816